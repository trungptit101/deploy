import{d as C,r as g,a as S,c as M,b as o,g as n,f as r,t as y,i as _,F as I,E as T,j as U,u as k,p as w,k as N,_ as $,m as V,e as j,q as D,P as R}from"./index-43fa284a.js";import{S as E}from"./http-7590b1ae.js";import"./el-col-327ca27f.js";import{C as P}from"./CPageContainer-285012f3.js";import{E as L,a as A,_ as X}from"./el-table-column-e379039f.js";import{C as q,_ as x}from"./CModalConfirm-8980a40c.js";import{_ as H}from"./EInputPhoneNumber.vue_vue_type_script_setup_true_lang-a72daaf7.js";/* empty css                     */import{M as F}from"./ManufacturerService-124548a6.js";import{g as G}from"./string-5c0d6496.js";import{E as J}from"./index-4dd40978.js";import"./index-45ffb881.js";import"./event-9519ab40.js";import"./validator-183bd9e8.js";import"./index-24f0d954.js";import"./flatten-2355c2af.js";import"./datetime-983c5328.js";import"./datetime-8fa1e943.js";import"./index-b24496e1.js";const z=d=>(w("data-v-27760248"),d=d(),N(),d),K={class:"tbl"},O=["title"],Q=["title"],W={class:"tbl__ellipse-1"},Y={class:"d-flex align-items-center justify-center"},Z=["onClick"],ee=z(()=>o("i",{class:"icon-Trash"},null,-1)),te=[ee],ae=["onClick"],ne=z(()=>o("i",{class:"icon-Edit"},null,-1)),oe=[ne],le=C({__name:"ManufacturersTable",props:{items:{default:()=>[]}},emits:["refresh"],setup(d,{emit:v}){const t=d,f=k(),m=g(null),u=i=>{m.value.open({id:i.id,title:"Xoá nhà sản xuất",message:`Bạn có chắc chắn muốn xóa nhà sản xuất <b>${i.name}</b> không?`})},h=i=>{f.pushByPath(`/manufacturers/form/${i.id}`)},b=async i=>{try{const{code:e}=await F.delete(i);if(e===E)return T({message:"Xoá nhà sản xuất thành công",type:"success"}),v("refresh"),m.value.close()}catch(e){console.log(e)}};return(i,e)=>{const l=L,c=U,a=A;return S(),M(I,null,[o("div",K,[n(a,{data:t.items,class:"tbl__table"},{default:r(()=>[n(l,{prop:"id",label:"ID",width:"100",align:"center"}),n(l,{prop:"name",label:"Tên nhà sản xuất","min-width":"240",align:"left","header-align":"center"},{default:r(({row:s})=>[o("span",{class:"tbl__ellipse-3",title:s.name},y(s.name),9,O)]),_:1}),n(l,{prop:"address",label:"Địa chỉ",width:"205",align:"left","header-align":"center"},{default:r(({row:s})=>[o("span",{class:"tbl__ellipse-3",title:s.address},y(_(G)({address:s.address,ward:s.wardName,district:s.districtName,province:s.cityName})),9,Q)]),_:1}),n(l,{prop:"phoneNumber",label:"Số điện thoại",width:"205",align:"center"}),n(l,{prop:"createdBy",label:"Người tạo",width:"205",align:"center"},{default:r(({row:s})=>[o("span",W,y(s.createdByName||"-"),1)]),_:1}),n(l,{prop:"createdAt",label:"Ngày tạo",width:"205",align:"center"}),n(l,{prop:"updatedAt",label:"Ngày cập nhật",width:"205",align:"center"}),n(l,{fixed:"right",prop:"action",label:"Hành động",width:"205",align:"center"},{default:r(({row:s})=>[o("div",Y,[n(c,{content:"Xoá"},{default:r(()=>[o("div",{class:"tbl__action btn__action--red d-flex justify-center align-items-center",onClick:B=>u(s)},te,8,Z)]),_:2},1024),n(c,{content:"Chỉnh sửa"},{default:r(()=>[o("div",{class:"tbl__action btn__action--blue d-flex justify-center align-items-center",onClick:B=>h(s)},oe,8,ae)]),_:2},1024)])]),_:1})]),_:1},8,["data"])]),n(_(q),{ref_key:"modalConfirmRef",ref:m,onConfirm:b},null,512)],64)}}});const se=$(le,[["__scopeId","data-v-27760248"]]),p=d=>(w("data-v-a4d96a42"),d=d(),N(),d),re={class:"manu__content p-16 rounded-sm"},ie={class:"manu__filter d-flex align-items-center justify-between mb-24 flex-wrap"},de={class:"d-flex align-items-center justify-start flex-wrap"},ce=p(()=>o("i",{class:"manu__filter__item__icon icon-Search"},null,-1)),ue=p(()=>o("i",{class:"icon-Search"},null,-1)),_e=p(()=>o("i",{class:"icon-Resset"},null,-1)),me=p(()=>o("i",{class:"icon-add-3 mr-4"},null,-1)),pe=p(()=>o("span",null,"Thêm mới",-1)),fe={class:"d-flex align-items-center justify-end mt-16"},he=C({__name:"ManufacturersList",setup(d){const v=k(),t=g({page:1,pageSize:R,keyword:"",phoneNumber:"",createdFrom:null,createdTo:null,updatedFrom:null,updatedTo:null}),f=g([]),m=g(0);V(async()=>{await u()});const u=async()=>{var i,e;try{const l={...t.value,keyword:(i=t.value.keyword)==null?void 0:i.trim(),phoneNumber:(e=t.value.phoneNumber)==null?void 0:e.toString().trim()},{code:c,data:a}=await F.getList(l);c===E&&(f.value=a.items,m.value=a.totalElement)}catch(l){console.log(l),T({message:"Có lỗi xảy ra",type:"error"})}},h=()=>{t.value.page=1,u()},b=()=>{t.value={page:1,pageSize:t.value.pageSize,keyword:"",phoneNumber:"",createdFrom:null,createdTo:null,updatedFrom:null,updatedTo:null},u()};return(i,e)=>{const l=J,c=D;return S(),j(_(P),{class:"manu",title:"Danh sách nhà sản xuất"},{default:r(()=>[o("div",re,[o("div",ie,[o("div",de,[n(l,{class:"manu__filter__item mr-8 mb-8",modelValue:t.value.keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.keyword=a),placeholder:"Tên nhà sản xuất"},{prefix:r(()=>[ce]),_:1},8,["modelValue"]),n(H,{class:"manu__filter__item mr-8 mb-8",modelValue:t.value.phoneNumber,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.phoneNumber=a),placeholder:"Số điện thoại"},null,8,["modelValue"]),n(_(x),{class:"manu__filter__item manu__filter__item--daterange mr-8 mb-8",from:t.value.createdFrom,"onUpdate:from":e[2]||(e[2]=a=>t.value.createdFrom=a),to:t.value.createdTo,"onUpdate:to":e[3]||(e[3]=a=>t.value.createdTo=a),type:"daterange","range-separator":"~","start-placeholder":"Ngày tạo: Từ","end-placeholder":"Đến"},null,8,["from","to"]),n(_(x),{class:"manu__filter__item manu__filter__item--daterange mr-8 mb-8",from:t.value.updatedFrom,"onUpdate:from":e[4]||(e[4]=a=>t.value.updatedFrom=a),to:t.value.updatedTo,"onUpdate:to":e[5]||(e[5]=a=>t.value.updatedTo=a),type:"daterange","range-separator":"~","start-placeholder":"Ngày cập nhật: Từ","end-placeholder":"Đến"},null,8,["from","to"]),n(c,{type:"primary",onClick:h,class:"mb-8"},{default:r(()=>[ue]),_:1}),n(c,{class:"mb-8",onClick:b},{default:r(()=>[_e]),_:1})]),n(c,{class:"mb-8",type:"primary",onClick:e[6]||(e[6]=a=>_(v).pushByPath("/manufacturers/form"))},{default:r(()=>[me,pe]),_:1})]),n(se,{items:f.value,onRefresh:u},null,8,["items"]),o("div",fe,[n(_(X),{"current-page":t.value.page,"onUpdate:currentPage":e[7]||(e[7]=a=>t.value.page=a),"page-size":t.value.pageSize,"onUpdate:pageSize":e[8]||(e[8]=a=>t.value.pageSize=a),total:m.value,onCurrentChange:u,onSizeChange:h},null,8,["current-page","page-size","total"])])])]),_:1})}}});const Ve=$(he,[["__scopeId","data-v-a4d96a42"]]);export{Ve as default};
