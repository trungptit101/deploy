import{d as P,r as u,a as N,c as J,b as o,w as O,e as M,f as c,g as a,h as Y,i as R,F as Z,E as F,j as q,u as Q,p as H,k as X,_ as K,l as W,m as ee,n as te,q as ae}from"./index-43fa284a.js";import{v as le}from"./el-loading-6ec02063.js";import{E as ne,a as oe,_ as se}from"./el-table-column-e379039f.js";import"./el-col-327ca27f.js";import{S}from"./http-7590b1ae.js";import{C as ie,_ as D}from"./CModalConfirm-8980a40c.js";import{E as re}from"./EImg-f0d9a1a1.js";/* empty css                     */import{C as j}from"./ConsignmentsService-2d91f76d.js";import{C as ue}from"./CPageContainer-285012f3.js";import{B as A,_ as V}from"./BaseService-ae473529.js";import{E as ce}from"./index-4dd40978.js";import"./index-45ffb881.js";import"./event-9519ab40.js";import"./validator-183bd9e8.js";import"./index-24f0d954.js";import"./flatten-2355c2af.js";import"./datetime-983c5328.js";import"./datetime-8fa1e943.js";import"./index-b24496e1.js";const z=m=>(H("data-v-9c67d248"),m=m(),X(),m),de={class:"tbl"},me={class:"d-flex align-items-center justify-center"},pe=["onClick"],_e=z(()=>o("i",{class:"icon-Trash"},null,-1)),fe=[_e],ge=["onClick"],he=z(()=>o("i",{class:"icon-Edit"},null,-1)),ve=[he],ye=["onClick"],be=z(()=>o("i",{class:"icon-eye-2"},null,-1)),xe=[be],Se=["onClick"],Ce=z(()=>o("i",{class:"icon-Copy"},null,-1)),we=[Ce],ke=P({__name:"ConsignmentsTable",props:{items:{default:()=>[]}},emits:["refresh","select"],setup(m,{expose:U,emit:v}){const t=m,y=Q(),C=u(!1),k=s=>{C.value=s},T=u(),r=u(null),B=s=>{r.value.open({id:s.id,title:"Xoá lô hàng",message:`Bạn có chắc chắn muốn xóa lô hàng <b>${s.name}</b> không?`})},L=async s=>{try{const{code:f}=await j.delete(s);if(f===S)return F({message:"Xoá lô hàng thành công",type:"success"}),v("refresh"),r.value.close()}catch(f){console.log(f)}},_=s=>{y.pushByPath(`/consignments/form/${s.id}`)},b=s=>{y.pushByPath(`/consignments/detail/${s.id}`)},E=s=>{y.pushByPath(`/consignments/coppy/${s.id}`)};return U({changeLoading:k}),(s,f)=>{const i=ne,g=q,x=oe,I=le;return N(),J(Z,null,[o("div",de,[O((N(),M(x,{data:t.items,class:"tbl__table",ref_key:"multipleTableRef",ref:T,"row-key":"id"},{default:c(()=>[a(i,{prop:"id",label:"ID",width:"100",align:"center"}),a(i,{prop:"image",label:"Ảnh",width:"205",align:"center"},{default:c(({row:p})=>[p.image?(N(),M(re,{key:0,class:"form__ecommerce__logo",src:p.image,size:"65px"},null,8,["src"])):Y("",!0)]),_:1}),a(i,{prop:"name",label:"Tên lô hàng","min-width":"240",align:"left","header-align":"center"}),a(i,{prop:"code",label:"Mã lô hàng",width:"205",align:"center"}),a(i,{prop:"shipmentType",label:"Loại lô hàng",width:"205",align:"center"}),a(i,{prop:"manufacturerName",label:"Nhà sản xuất",width:"205",align:"center"}),a(i,{prop:"produceTime",label:"Ngày sản xuất",width:"205",align:"center"}),a(i,{prop:"expiryDate",label:"Hạn sử dụng",width:"205",align:"center"}),a(i,{prop:"warehouseName",label:"Kho hàng",width:"205",align:"center"}),a(i,{prop:"userName",label:"Người tạo",width:"205",align:"center"}),a(i,{prop:"createdAt",label:"Ngày tạo",width:"205",align:"center"}),a(i,{prop:"updatedAt",label:"Ngày cập nhật",width:"205",align:"center"}),a(i,{fixed:"right",prop:"action",label:"Hành động",width:"205",align:"center"},{default:c(({row:p})=>[o("div",me,[a(g,{content:"Xoá"},{default:c(()=>[o("div",{class:"btn__action btn__action--red d-flex justify-center align-items-center",onClick:w=>B(p)},fe,8,pe)]),_:2},1024),a(g,{content:"Chỉnh sửa"},{default:c(()=>[o("div",{class:"btn__action btn__action--blue d-flex justify-center align-items-center",onClick:w=>_(p)},ve,8,ge)]),_:2},1024),a(g,{content:"Chi tiết"},{default:c(()=>[o("div",{class:"btn__action btn__action--yellow d-flex justify-center align-items-center mr-8",onClick:w=>b(p)},xe,8,ye)]),_:2},1024),a(g,{content:"Nhân bản"},{default:c(()=>[o("div",{class:"btn__action btn__action--gray d-flex justify-center align-items-center",onClick:w=>E(p)},we,8,Se)]),_:2},1024)])]),_:1})]),_:1},8,["data"])),[[I,C.value]])]),a(R(ie),{ref_key:"modalConfirmRef",ref:r,onConfirm:L},null,512)],64)}}});const Te=K(ke,[["__scopeId","data-v-9c67d248"]]),h=m=>(H("data-v-c2a6798c"),m=m(),X(),m),Le={class:"product__content p-16 rounded-sm"},Ee={class:"product__filter d-flex align-items-center justify-start flex-wrap"},Ie=h(()=>o("i",{class:"product__filter__item__icon icon-Search"},null,-1)),$e=h(()=>o("i",{class:"icon-Search"},null,-1)),Ae=h(()=>o("i",{class:"icon-Resset"},null,-1)),Ve={class:"d-flex align-items-center justify-start mt-4 mb-32"},Ne=h(()=>o("i",{class:"icon-add-3 mr-4"},null,-1)),ze=h(()=>o("span",null,"Thêm mới",-1)),Ue=h(()=>o("i",{class:"icon-export-2 mr-4"},null,-1)),Be=h(()=>o("span",null,"Export",-1)),De={class:"d-flex align-items-center justify-end mt-16"},Me=P({__name:"ConsignmentsList",setup(m){const U=Q(),v=u(),t=u({page:1,pageSize:10,key:null,shipmentTypeId:null,status:null,warehouseId:null,manuFacturerId:null,expiryTimeStart:null,expiryTimeEnd:null,createdAtStart:null,createdAtEnd:null,updateedAtStart:null,updateedAtEnd:null,userCreatedId:null}),y=u({page:1,pageSize:10,key:""}),C=u({page:1,pageSize:10,key:"",status:null}),k=u({page:1,pageSize:10,key:"",status:null}),T=u({page:1,pageSize:10,keyword:""}),r=W({staffList:[],shipmentTypeList:[],warehouseList:[],manuFacturerList:[],listData:[],totals:0});ee(async()=>{await Promise.all([_(),I(),E(),g(),f()])});const B=()=>{t.value={page:1,pageSize:t.value.pageSize,key:null,shipmentTypeId:null,status:null,warehouseId:null,manuFacturerId:null,expiryTimeStart:null,expiryTimeEnd:null,createdAtStart:null,createdAtEnd:null,updateedAtStart:null,updateedAtEnd:null,userCreatedId:null},_()},L=()=>{t.value.page=1,_()},_=async()=>{try{const n={...t.value,key:t.value.key?t.value.key.trim():""};v.value.changeLoading(!0);const{code:e,data:d}=await j.getList(n);e===S&&(r.listData=d.items,r.totals=d.totalElement,v.value.changeLoading(!1))}catch{v.value.changeLoading(!1),F({message:"Có lỗi xảy ra",type:"error"})}},b=u(!1),E=async n=>{try{b.value=!0,y.value.key=n?n.trim():"";const{code:e,data:d}=await A.getListShipmentType(y.value);e===S&&(r.shipmentTypeList=d.items,b.value=!1)}catch{b.value=!1}},s=u(!1),f=async n=>{try{s.value=!0,T.value.keyword=n?n.trim():"";const{code:e,data:d}=await A.getListManufacturer(T.value);e===S&&(r.manuFacturerList=d.items,s.value=!1)}catch{s.value=!1}},i=u(!1),g=async n=>{try{i.value=!0,C.value.key=n?n.trim():"";const{code:e,data:d}=await A.getListWarehouse(C.value);e===S&&(r.warehouseList=d.items,i.value=!1)}catch{i.value=!1}},x=u(!1),I=async n=>{try{x.value=!0,k.value.key=n?n.trim():"";const{code:e,data:d}=await A.getListStaff(k.value);e===S&&(r.staffList=d.items,x.value=!1)}catch{x.value=!1}},p=u([]),w=n=>{p.value=n,console.log("event",p.value)};u(),u([]),W({page:1,pageSize:10,key:null});const G=async()=>{try{const n=await j.export(t.value);n&&te(n,"Danh sách lô hàng")}catch{F({message:"Có lỗi xảy ra",type:"error"})}};return(n,e)=>{const d=ce,$=ae;return N(),M(R(ue),{class:"product",title:"Danh sách lô hàng"},{default:c(()=>[o("div",Le,[o("div",Ee,[a(d,{class:"product__filter__item mr-8 mb-8",modelValue:t.value.key,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.key=l),placeholder:"Tên hoặc mã lô hàng"},{prefix:c(()=>[Ie]),_:1},8,["modelValue"]),a(V,{items:r.shipmentTypeList,"item-value":"value","item-label":"label",modelValue:t.value.shipmentTypeId,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.shipmentTypeId=l),class:"product__filter__item mr-8 mb-8",placeholder:"Loại lô",maxWidth:"300px",remote:!0,filterable:!0,"reserve-keyword":!0,"remote-show-suffix":!0,loading:b.value,remoteMethod:E},null,8,["items","modelValue","loading"]),a(V,{items:r.warehouseList,"item-value":"value","item-label":"label",modelValue:t.value.warehouseId,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.warehouseId=l),class:"product__filter__item mr-8 mb-8",placeholder:"Kho hàng",maxWidth:"300px",remote:!0,filterable:!0,"reserve-keyword":!0,"remote-show-suffix":!0,loading:i.value,remoteMethod:g},null,8,["items","modelValue","loading"]),a(V,{items:r.manuFacturerList,"item-value":"value","item-label":"label",modelValue:t.value.manuFacturerId,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.manuFacturerId=l),class:"product__filter__item mr-8 mb-8",placeholder:"Nhà sản xuất",maxWidth:"300px",remote:!0,filterable:!0,"reserve-keyword":!0,"remote-show-suffix":!0,loading:s.value,remoteMethod:f},null,8,["items","modelValue","loading"]),a(D,{class:"product__filter__item product__filter__item--daterange mr-8 mb-8",from:t.value.expiryTimeStart,"onUpdate:from":e[4]||(e[4]=l=>t.value.expiryTimeStart=l),to:t.value.expiryTimeEnd,"onUpdate:to":e[5]||(e[5]=l=>t.value.expiryTimeEnd=l),type:"daterange","range-separator":"~","start-placeholder":"Hạn sử dung: Từ","end-placeholder":"Đến"},null,8,["from","to"]),a(D,{class:"product__filter__item product__filter__item--daterange mr-8 mb-8",from:t.value.createdAtStart,"onUpdate:from":e[6]||(e[6]=l=>t.value.createdAtStart=l),to:t.value.createdAtEnd,"onUpdate:to":e[7]||(e[7]=l=>t.value.createdAtEnd=l),type:"daterange","range-separator":"~","start-placeholder":"Ngày tạo: Từ","end-placeholder":"Đến"},null,8,["from","to"]),a(V,{items:r.staffList,"item-value":"value","item-label":"label",modelValue:t.value.userCreatedId,"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.userCreatedId=l),class:"product__filter__item mr-8 mb-8",placeholder:"Người tạo",maxWidth:"300px",remote:!0,filterable:!0,"reserve-keyword":!0,"remote-show-suffix":!0,loading:x.value,remoteMethod:I},null,8,["items","modelValue","loading"]),a(D,{class:"product__filter__item product__filter__item--daterange mr-8 mb-8",from:t.value.updateedAtStart,"onUpdate:from":e[9]||(e[9]=l=>t.value.updateedAtStart=l),to:t.value.updateedAtEnd,"onUpdate:to":e[10]||(e[10]=l=>t.value.updateedAtEnd=l),type:"daterange","range-separator":"~","start-placeholder":"Ngày cập nhật: Từ","end-placeholder":"Đến"},null,8,["from","to"]),a($,{type:"primary",onClick:L,class:"mb-8"},{default:c(()=>[$e]),_:1}),a($,{class:"mb-8",onClick:B},{default:c(()=>[Ae]),_:1})]),o("div",Ve,[a($,{type:"primary",onClick:e[11]||(e[11]=l=>R(U).pushByPath("/consignments/form"))},{default:c(()=>[Ne,ze]),_:1}),a($,{type:"info",onClick:G},{default:c(()=>[Ue,Be]),_:1})]),a(Te,{ref_key:"consignmentsTableRef",ref:v,items:r.listData,onSelect:w,onRefresh:_},null,8,["items"]),o("div",De,[a(se,{"current-page":t.value.page,"onUpdate:currentPage":e[12]||(e[12]=l=>t.value.page=l),"page-size":t.value.pageSize,"onUpdate:pageSize":e[13]||(e[13]=l=>t.value.pageSize=l),total:r.totals,onCurrentChange:_,onSizeChange:L},null,8,["current-page","page-size","total"])])])]),_:1})}}});const ot=K(Me,[["__scopeId","data-v-c2a6798c"]]);export{ot as default};
