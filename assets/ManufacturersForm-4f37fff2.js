import{d as T,r as f,m as B,a as F,e as R,f as r,g as l,i,b as _,y as N,u as j,Y as k,E as b,q as W,_ as $}from"./index-43fa284a.js";/* empty css                     */import"./el-col-327ca27f.js";import{C as Q}from"./CPageContainer-285012f3.js";import{S as C,E as H}from"./http-7590b1ae.js";import{r as m,a as Y,b as z,c as A}from"./validate-14f65514.js";import{C as G}from"./CCardContainer-6404432a.js";import{u as J,E as V,a as K}from"./useLocation-da7ee8c5.js";import{_ as O}from"./EInputPhoneNumber.vue_vue_type_script_setup_true_lang-a72daaf7.js";import{M as y}from"./ManufacturerService-124548a6.js";import{E as X}from"./index-4dd40978.js";import{E as Z,a as ee}from"./index-c461f170.js";import{E as te,a as le}from"./index-8a25c6f7.js";import"./index-45ffb881.js";import"./event-9519ab40.js";import"./validator-183bd9e8.js";const ae={class:"d-flex align-items-center justify-between mb-16"},se={class:"d-flex align-items-center justify-between mb-16"},re={class:"d-flex align-items-center justify-between mb-16"},oe={class:"d-flex align-items-center justify-between mb-16"},ie={class:"form__actions d-flex justify-end align-items-center mt-16"},ne=T({__name:"ManufacturersForm",setup(ue){const I=j(),w=k(),x=f(),u=J(),e=f({name:"",tax:"",email:"",phoneNumber:"",website:"",descriptions:"",cityId:null,districtId:null,wardId:null,address:""}),d=f(w.params.id?w.params.id.toString():null),E=d.value?"Cập nhật nhà sản xuất":"Thêm mới nhà sản xuất",q=f({name:[m({required:!0,message:"Tên nhà sản xuất là bắt buộc",trigger:"change"})],tax:[m({required:!0,message:"Mã số thuế là bắt buộc",trigger:"change"})],cityId:[m({required:!0,message:"Tỉnh thành là bắt buộc",trigger:"change"})],districtId:[m({required:!0,message:"Quận huyện là bắt buộc",trigger:"change"})],wardId:[m({required:!0,message:"Phường xã là bắt buộc",trigger:"change"})],address:[m({required:!0,message:"Địa chỉ là bắt buộc",trigger:"change"})],email:[Y({required:!1,trigger:"change"})],website:[z({required:!1,trigger:"change"})],phoneNumber:[A({required:!1,trigger:"change"})]}),h=f(!1);B(async()=>{await u.getListProvinces(),d.value&&await P(d.value)});const M=a=>{u.changeProvinceId(a),e.value.districtId=null,e.value.wardId=null},U=a=>{u.changeDistrictId(a),e.value.wardId=null},P=async a=>{const{code:t,data:n}=await y.getDetail(a);t===C&&D(n)},D=a=>{e.value={name:a.name||"",tax:a.tax||"",email:a.email||"",phoneNumber:a.phoneNumber||"",website:a.website||"",descriptions:a.descriptions||"",cityId:a.cityId||null,districtId:a.districtId||null,wardId:a.wardId||null,address:a.address||""},a.cityId&&u.getListDistricts(a.cityId),a.districtId&&u.getListWards(a.districtId)},L=async a=>{var t,n,o,c,g;a&&(e.value={...e.value,name:e.value.name.trim(),tax:(n=(t=e.value)==null?void 0:t.tax)==null?void 0:n.trim(),email:(o=e.value.email)==null?void 0:o.trim(),website:(c=e.value.website)==null?void 0:c.trim(),phoneNumber:(g=e.value.phoneNumber)==null?void 0:g.trim(),address:e.value.address.trim()},await a.validate(async v=>{if(v)try{h.value=!0;const p=d.value?"Cập nhật thành công":"Thêm mới thành công",{code:s,message:S}=d.value?await y.update(Number(d.value),e.value):await y.create(e.value);if(s===C)return b({message:p,type:"success"}),I.pushByPath("/manufacturers");if(s===H)return b({message:"Mã số thuế đã tồn tại",type:"error"});b({message:S,type:"error"})}catch(p){console.log(p)}finally{h.value=!1}}))};return(a,t)=>{const n=X,o=Z,c=W,g=te,v=le,p=ee;return F(),R(i(Q),{class:"form",title:i(E)},{default:r(()=>[l(p,{ref_key:"formRef",ref:x,model:e.value,rules:q.value,"label-position":"top"},{default:r(()=>[l(v,{gutter:30},{default:r(()=>[l(g,{xs:24,lg:16},{default:r(()=>[l(i(G),null,{default:r(()=>[l(o,{label:"Tên nhà sản xuất",required:"",class:"mb-16",prop:"name"},{default:r(()=>[l(n,{modelValue:e.value.name,"onUpdate:modelValue":t[0]||(t[0]=s=>e.value.name=s),placeholder:"Nhập tên nhà sản xuất"},null,8,["modelValue"])]),_:1}),_("div",ae,[l(o,{label:"Mã số thuế",required:"",class:"form__item",prop:"tax"},{default:r(()=>[l(n,{modelValue:e.value.tax,"onUpdate:modelValue":t[1]||(t[1]=s=>e.value.tax=s),placeholder:"Nhập mã số thuế"},null,8,["modelValue"])]),_:1}),l(o,{label:"Email",class:"form__item",prop:"email"},{default:r(()=>[l(n,{modelValue:e.value.email,"onUpdate:modelValue":t[2]||(t[2]=s=>e.value.email=s),placeholder:"Nhập email"},null,8,["modelValue"])]),_:1})]),_("div",se,[l(o,{label:"Số điện thoại",class:"form__item",prop:"phoneNumber"},{default:r(()=>[l(i(O),{modelValue:e.value.phoneNumber,"onUpdate:modelValue":t[3]||(t[3]=s=>e.value.phoneNumber=s),placeholder:"Nhập số điện thoại"},null,8,["modelValue"])]),_:1}),l(o,{label:"Website",class:"form__item",prop:"website"},{default:r(()=>[l(n,{modelValue:e.value.website,"onUpdate:modelValue":t[4]||(t[4]=s=>e.value.website=s),placeholder:"Nhập website"},null,8,["modelValue"])]),_:1})]),_("div",re,[l(o,{label:"Tỉnh thành",required:"",class:"form__item",prop:"cityId"},{default:r(()=>[l(i(V),{placeholder:"Vui lòng chọn",items:i(u).listProvinces.value,modelValue:e.value.cityId,"onUpdate:modelValue":t[5]||(t[5]=s=>e.value.cityId=s),onChange:M},null,8,["items","modelValue"])]),_:1}),l(o,{label:"Quận huyện",required:"",class:"form__item",prop:"districtId"},{default:r(()=>[l(i(V),{placeholder:"Vui lòng chọn",items:i(u).listDistricts.value,modelValue:e.value.districtId,"onUpdate:modelValue":t[6]||(t[6]=s=>e.value.districtId=s),onChange:U},null,8,["items","modelValue"])]),_:1})]),_("div",oe,[l(o,{label:"Phường xã",required:"",class:"form__item",prop:"wardId"},{default:r(()=>[l(i(V),{placeholder:"Vui lòng chọn",items:i(u).listWards.value,modelValue:e.value.wardId,"onUpdate:modelValue":t[7]||(t[7]=s=>e.value.wardId=s)},null,8,["items","modelValue"])]),_:1}),l(o,{label:"Địa chỉ",required:"",class:"form__item",prop:"address"},{default:r(()=>[l(n,{modelValue:e.value.address,"onUpdate:modelValue":t[8]||(t[8]=s=>e.value.address=s),placeholder:"Nhập địa chỉ"},null,8,["modelValue"])]),_:1})]),l(o,{label:"Mô tả",class:"form__item"},{default:r(()=>[l(i(K),{modelValue:e.value.descriptions,"onUpdate:modelValue":t[9]||(t[9]=s=>e.value.descriptions=s),placeholder:"Nhập mô tả"},null,8,["modelValue"])]),_:1})]),_:1}),_("div",ie,[l(c,{class:"form__actions__btn form__actions__btn--cancel",onClick:t[10]||(t[10]=s=>i(I).pushByPath("/manufacturers"))},{default:r(()=>[N("Hủy bỏ")]),_:1}),l(c,{class:"form__actions__btn",type:"primary",onClick:t[11]||(t[11]=s=>L(x.value)),loading:h.value},{default:r(()=>[N("Lưu lại")]),_:1},8,["loading"])])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])}}});const Ce=$(ne,[["__scopeId","data-v-94538dc4"]]);export{Ce as default};
