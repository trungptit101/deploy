import{ay as de,m as te,bl as fe,bu as me,ac as X,a0 as ve,aj as pe,K as J,bK as ye,b1 as se,aD as _,I as j,b3 as ge,b4 as be,bL as Ce,b0 as he,bM as V,C as Z,D as K,d as Y,g as R,bN as H,M as C,a$ as ke,a3 as we,as as Ee,O as G,bO as Me,L as O,a as F,c as W,b as U,v as k,i as o,t as Se,f as D,e as q,ae as Te,S as De,h as x,ag as ne,N as le,bP as Ie,a4 as Be,a6 as Le,b2 as $e,bQ as Q,r as I,bR as Fe,ah as Oe,bS as Ae,bT as ee,aF as Pe,a9 as oe,J as Ne,w as ze,bU as Re,aw as Ye,a2 as Ue,T as Ve,aC as He,bV as We,W as Xe}from"./index-43fa284a.js";import{U as ae}from"./event-9519ab40.js";import{g as je}from"./index-45ffb881.js";const Ke=(...e)=>t=>{e.forEach(n=>{de(n)?n(t):n.value=t})},qe=(e,t,n)=>{let u={offsetX:0,offsetY:0};const r=a=>{const c=a.clientX,v=a.clientY,{offsetX:m,offsetY:p}=u,s=e.value.getBoundingClientRect(),f=s.left,w=s.top,A=s.width,P=s.height,N=document.documentElement.clientWidth,B=document.documentElement.clientHeight,z=-f+m,L=-w+p,E=N-f-A+m,M=B-w-P+p,$=h=>{const l=Math.min(Math.max(m+h.clientX-c,z),E),b=Math.min(Math.max(p+h.clientY-v,L),M);u={offsetX:l,offsetY:b},e.value.style.transform=`translate(${X(l)}, ${X(b)})`},y=()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",$),document.addEventListener("mouseup",y)},d=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",r)},i=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",r)};te(()=>{fe(()=>{n.value?d():i()})}),me(()=>{i()})},xe=e=>{ve(e)||pe("[useLockscreen]","You need to pass a ref param to this function");const t=J("popup"),n=ye(()=>t.bm("parent","hidden"));if(!se||_(document.body,n.value))return;let u=0,r=!1,d="0";const i=()=>{setTimeout(()=>{he(document==null?void 0:document.body,n.value),r&&document&&(document.body.style.width=d)},200)};j(e,a=>{if(!a){i();return}r=!_(document.body,n.value),r&&(d=document.body.style.width),u=je(t.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,v=ge(document.body,"overflowY");u>0&&(c||v==="scroll")&&r&&(document.body.style.width=`calc(100% - ${u}px)`),be(document.body,n.value)}),Ce(()=>i())},ue=e=>{if(!e)return{onClick:V,onMousedown:V,onMouseup:V};let t=!1,n=!1;return{onClick:i=>{t&&n&&e(i),t=n=!1},onMousedown:i=>{t=i.target===i.currentTarget},onMouseup:i=>{n=i.target===i.currentTarget}}},Je=Z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:K([String,Array,Object])},zIndex:{type:K([String,Number])}}),Ze={click:e=>e instanceof MouseEvent};var _e=Y({name:"ElOverlay",props:Je,emits:Ze,setup(e,{slots:t,emit:n}){const u=J("overlay"),r=c=>{n("click",c)},{onClick:d,onMousedown:i,onMouseup:a}=ue(e.customMaskEvent?void 0:r);return()=>e.mask?R("div",{class:[u.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:i,onMouseup:a},[C(t,"default")],H.STYLE|H.CLASS|H.PROPS,["onClick","onMouseup","onMousedown"]):ke("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(t,"default")])}});const Ge=_e,ie=Symbol("dialogInjectionKey"),re=Z({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:we},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Qe={close:()=>!0},eo=["aria-label"],oo=["id"],to=Y({name:"ElDialogContent"}),so=Y({...to,props:re,emits:Qe,setup(e){const t=e,{t:n}=Ee(),{Close:u}=Ie,{dialogRef:r,headerRef:d,bodyId:i,ns:a,style:c}=G(ie),{focusTrapRef:v}=G(Me),m=Ke(v,r),p=O(()=>t.draggable);return qe(r,d,p),(s,f)=>(F(),W("div",{ref:o(m),class:k([o(a).b(),o(a).is("fullscreen",s.fullscreen),o(a).is("draggable",o(p)),o(a).is("align-center",s.alignCenter),{[o(a).m("center")]:s.center},s.customClass]),style:ne(o(c)),tabindex:"-1"},[U("header",{ref_key:"headerRef",ref:d,class:k(o(a).e("header"))},[C(s.$slots,"header",{},()=>[U("span",{role:"heading",class:k(o(a).e("title"))},Se(s.title),3)]),s.showClose?(F(),W("button",{key:0,"aria-label":o(n)("el.dialog.close"),class:k(o(a).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=w=>s.$emit("close"))},[R(o(De),{class:k(o(a).e("close"))},{default:D(()=>[(F(),q(Te(s.closeIcon||o(u))))]),_:1},8,["class"])],10,eo)):x("v-if",!0)],2),U("div",{id:o(i),class:k(o(a).e("body"))},[C(s.$slots,"default")],10,oo),s.$slots.footer?(F(),W("footer",{key:0,class:k(o(a).e("footer"))},[C(s.$slots,"footer")],2)):x("v-if",!0)],6))}});var no=le(so,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const lo=Z({...re,appendToBody:{type:Boolean,default:!1},beforeClose:{type:K(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),ao={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ae]:e=>Be(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},uo=(e,t)=>{const u=Le().emit,{nextZIndex:r}=$e();let d="";const i=Q(),a=Q(),c=I(!1),v=I(!1),m=I(!1),p=I(e.zIndex||r());let s,f;const w=Fe("namespace",Ae),A=O(()=>{const g={},T=`--${w.value}-dialog`;return e.fullscreen||(e.top&&(g[`${T}-margin-top`]=e.top),e.width&&(g[`${T}-width`]=X(e.width))),g}),P=O(()=>e.alignCenter?{display:"flex"}:{});function N(){u("opened")}function B(){u("closed"),u(ae,!1),e.destroyOnClose&&(m.value=!1)}function z(){u("close")}function L(){f==null||f(),s==null||s(),e.openDelay&&e.openDelay>0?{stop:s}=ee(()=>y(),e.openDelay):y()}function E(){s==null||s(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=ee(()=>h(),e.closeDelay):h()}function M(){function g(T){T||(v.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(g):E()}function $(){e.closeOnClickModal&&M()}function y(){se&&(c.value=!0)}function h(){c.value=!1}function l(){u("openAutoFocus")}function b(){u("closeAutoFocus")}function S(g){var T;((T=g.detail)==null?void 0:T.focusReason)==="pointer"&&g.preventDefault()}e.lockScroll&&xe(c);function ce(){e.closeOnPressEscape&&M()}return j(()=>e.modelValue,g=>{g?(v.value=!1,L(),m.value=!0,p.value=e.zIndex?p.value++:r(),Oe(()=>{u("open"),t.value&&(t.value.scrollTop=0)})):c.value&&E()}),j(()=>e.fullscreen,g=>{t.value&&(g?(d=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=d)}),te(()=>{e.modelValue&&(c.value=!0,m.value=!0,L())}),{afterEnter:N,afterLeave:B,beforeLeave:z,handleClose:M,onModalClick:$,close:E,doClose:h,onOpenAutoFocus:l,onCloseAutoFocus:b,onCloseRequested:ce,onFocusoutPrevented:S,titleId:i,bodyId:a,closed:v,style:A,overlayDialogStyle:P,rendered:m,visible:c,zIndex:p}},io=["aria-label","aria-labelledby","aria-describedby"],ro=Y({name:"ElDialog",inheritAttrs:!1}),co=Y({...ro,props:lo,emits:ao,setup(e,{expose:t}){const n=e,u=Pe();oe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},O(()=>!!u.title)),oe({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},O(()=>!!n.customClass));const r=J("dialog"),d=I(),i=I(),a=I(),{visible:c,titleId:v,bodyId:m,style:p,overlayDialogStyle:s,rendered:f,zIndex:w,afterEnter:A,afterLeave:P,beforeLeave:N,handleClose:B,onModalClick:z,onOpenAutoFocus:L,onCloseAutoFocus:E,onCloseRequested:M,onFocusoutPrevented:$}=uo(n,d);Ne(ie,{dialogRef:d,headerRef:i,bodyId:m,ns:r,rendered:f,style:p});const y=ue(z),h=O(()=>n.draggable&&!n.fullscreen);return t({visible:c,dialogContentRef:a}),(l,b)=>(F(),q(We,{to:"body",disabled:!l.appendToBody},[R(He,{name:"dialog-fade",onAfterEnter:o(A),onAfterLeave:o(P),onBeforeLeave:o(N),persisted:""},{default:D(()=>[ze(R(o(Ge),{"custom-mask-event":"",mask:l.modal,"overlay-class":l.modalClass,"z-index":o(w)},{default:D(()=>[U("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:o(v),"aria-describedby":o(m),class:k(`${o(r).namespace.value}-overlay-dialog`),style:ne(o(s)),onClick:b[0]||(b[0]=(...S)=>o(y).onClick&&o(y).onClick(...S)),onMousedown:b[1]||(b[1]=(...S)=>o(y).onMousedown&&o(y).onMousedown(...S)),onMouseup:b[2]||(b[2]=(...S)=>o(y).onMouseup&&o(y).onMouseup(...S))},[R(o(Re),{loop:"",trapped:o(c),"focus-start-el":"container",onFocusAfterTrapped:o(L),onFocusAfterReleased:o(E),onFocusoutPrevented:o($),onReleaseRequested:o(M)},{default:D(()=>[o(f)?(F(),q(no,Ye({key:0,ref_key:"dialogContentRef",ref:a},l.$attrs,{"custom-class":l.customClass,center:l.center,"align-center":l.alignCenter,"close-icon":l.closeIcon,draggable:o(h),fullscreen:l.fullscreen,"show-close":l.showClose,title:l.title,onClose:o(B)}),Ue({header:D(()=>[l.$slots.title?C(l.$slots,"title",{key:1}):C(l.$slots,"header",{key:0,close:o(B),titleId:o(v),titleClass:o(r).e("title")})]),default:D(()=>[C(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:D(()=>[C(l.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):x("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,io)]),_:3},8,["mask","overlay-class","z-index"]),[[Ve,o(c)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var fo=le(co,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const yo=Xe(fo);export{yo as E};
